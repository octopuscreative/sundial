(function(){var Sundial,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Sundial=function(){function Sundial(el,options){var key,val;null==options&&(options={}),this.incrementCurrentMonth=bind(this.incrementCurrentMonth,this),this.decrementCurrentMonth=bind(this.decrementCurrentMonth,this),this.setCurrentMonth=bind(this.setCurrentMonth,this),this.hide=bind(this.hide,this),this.show=bind(this.show,this),this.settings={enableSidebar:!0,enableTimePicker:!0,allowEmptyDate:!0,classPrefix:"sundial",wrapperTagName:"div",currentMonth:moment(),minDate:null,maxDate:null,enableDate:null,firstDay:1,timePickerDescription:"Format: 24hr",inputFormat:"YYYY, dddd MMM Do, h:mmA Z",sidebarYearFormat:"YYYY",sidebarDateFormat:"ddd, MMM D",sidebarTimeFormat:"h:mmA Z"};for(key in options)val=options[key],this.settings[key]=val;this.currentMonth=this.settings.currentMonth.startOf("month"),this.els={},this.els.input=el,this._buildPopover(),this._wrapEl(),this._bindEvents(),this._renderCalendar()}return Sundial.prototype.show=function(){return console.log("should show")},Sundial.prototype.hide=function(){return console.log("should hide")},Sundial.prototype.setCurrentMonth=function(year,month){return this.currentMonth=moment(year+"-"+month,"YYYY-M"),this._renderCalendar()},Sundial.prototype.decrementCurrentMonth=function(){return this.currentMonth=this.currentMonth.subtract(1,"month"),this._renderCalendar()},Sundial.prototype.incrementCurrentMonth=function(){return this.currentMonth=this.currentMonth.add(1,"month"),this._renderCalendar()},Sundial.prototype._makeEl=function(tagName,className,innerText){var el;return el=document.createElement(tagName),null!=className&&(el.className=className),null!=innerText&&(el.innerText=innerText),el},Sundial.prototype._buildPopover=function(){return this.els.popover=this._makeEl("div",this.settings.classPrefix+"-popover"),this.settings.enableSidebar===!0&&this._buildSidebar(),this.els.pickerContainer=this._makeEl("div",this.settings.classPrefix+"-picker-container"),this.els.popover.appendChild(this.els.pickerContainer),this._buildDatePicker(),this.settings.enableTimePicker===!0&&this._buildTimePicker(),document.body.appendChild(this.els.popover)},Sundial.prototype._buildSidebar=function(){return this.els.sidebar=this._makeEl("div",this.settings.classPrefix+"-sidebar"),this.els.sidebarYear=this._makeEl("p",this.settings.classPrefix+"-sidebar-year"),this.els.sidebar.appendChild(this.els.sidebarYear),this.els.sidebarDate=this._makeEl("p",this.settings.classPrefix+"-sidebar-date"),this.els.sidebar.appendChild(this.els.sidebarDate),this.settings.enableTimePicker===!0&&(this.els.sidebarTime=this._makeEl("p",this.settings.classPrefix+"-sidebar-time"),this.els.sidebar.appendChild(this.els.sidebarTime)),this.els.popover.appendChild(this.els.sidebar)},Sundial.prototype._buildDatePicker=function(){return this.els.datePicker=this._makeEl("div",this.settings.classPrefix+"-date-picker"),this.els.datePickerHeader=this._makeEl("header",this.settings.classPrefix+"-date-picker-header"),this.els.datePickerDecrementMonth=this._makeEl("button",this.settings.classPrefix+"-date-picker-decrement-month","Previous Month"),this.els.datePickerHeaderText=this._makeEl("p",this.settings.classPrefix+"-date-picker-header-text"),this.els.datePickerIncrementMonth=this._makeEl("button",this.settings.classPrefix+"-date-picker-increment-month","Next Month"),this.els.datePickerHeader.appendChild(this.els.datePickerDecrementMonth),this.els.datePickerHeader.appendChild(this.els.datePickerHeaderText),this.els.datePickerHeader.appendChild(this.els.datePickerIncrementMonth),this.els.calendarContainer=this._makeEl("div",this.settings.classPrefix+"-calendar-container"),this.els.datePicker.appendChild(this.els.datePickerHeader),this.els.datePicker.appendChild(this.els.calendarContainer),this.els.pickerContainer.appendChild(this.els.datePicker)},Sundial.prototype._buildTimePicker=function(){var h,hourEl,i,j,m,minuteEl;for(this.els.timePicker=this._makeEl("div",this.settings.classPrefix+"-time-picker"),this.els.timePickerHour=this._makeEl("select",this.settings.classPrefix+"-time-picker-hour"),this.els.timePickerMinute=this._makeEl("select",this.settings.classPrefix+"-time-picker-minute"),this.els.timePickerDescription=this._makeEl("p",this.settings.classPrefix+"-time-picker-description",this.settings.timePickerDescription),h=i=0;23>=i;h=++i)hourEl=this._makeEl("option",null,("0"+h).slice(-2)),this.els.timePickerHour.appendChild(hourEl);for(m=j=0;59>=j;m=++j)minuteEl=this._makeEl("option",null,("0"+m).slice(-2)),this.els.timePickerMinute.appendChild(minuteEl);return this.els.timePicker.appendChild(this.els.timePickerHour),this.els.timePicker.appendChild(this.els.timePickerMinute),this.els.timePicker.appendChild(this.els.timePickerDescription),this.els.pickerContainer.appendChild(this.els.timePicker)},Sundial.prototype._wrapEl=function(){var nextSibling,parent;return this.els.wrapper=this._makeEl(this.settings.wrapperTagName,this.settings.classPrefix+"-wrapper"),parent=this.els.input.parentNode,nextSibling=this.els.input.nextSibling,this.els.wrapper.appendChild(this.els.input),nextSibling?parent.insertBefore(this.els.wrapper,nextSibling):parent.appendChild(this.els.wrapper)},Sundial.prototype._bindEvents=function(){return this.els.input.addEventListener("focus",this.show,!0),this.els.datePickerDecrementMonth.addEventListener("click",this.decrementCurrentMonth,!0),this.els.datePickerIncrementMonth.addEventListener("click",this.incrementCurrentMonth,!0)},Sundial.prototype._renderCalendar=function(){var calendarHtml,daysInMonth;return daysInMonth=this.currentMonth.daysInMonth(),calendarHtml="",this.els.datePickerHeaderText.innerText=this.currentMonth.format("MMMM")+" "+this.currentMonth.format("YYYY"),this.els.calendarContainer.innerHTML=calendarHtml},Sundial}(),window.Sundial=Sundial}).call(this);